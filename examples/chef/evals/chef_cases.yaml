# yaml-language-server: $schema=chef_cases_schema.json
cases:
- name: gluten_allergy_pasta
  inputs:
    user_text: I have a gluten allergy and want pasta recommendations
  metadata:
    focus: allergen_avoidance
    complexity: simple
  expected_output:
    search_allergens_calls:
    - allergy_name: gluten
    search_recipes_calls:
    - query: pasta
      ingredients_to_avoid:
      - wheat flour
      - wheat pasta
      - wheat bread
      - wheat bun
      - wheat tortilla
      - pasta
      - bread
      - pizza dough
      - soy sauce
    output:
      decision: recommend
    num_tool_calls: 2
    search_allergens_called_first: true
    service_rejected: false
- name: vegan_italian_budget
  inputs:
    user_text: I want vegan Italian food under $10 that takes less than 30 minutes
  metadata:
    focus: multi_filter
    complexity: medium
  expected_output:
    search_allergens_calls: []
    search_recipes_calls:
    - query: italian vegan
      diet: vegan
      cuisine: italian
      cost_max: 10.0
      prep_time_max: 30
    output:
      decision: recommend
    num_tool_calls: 1
    search_allergens_called_first: false
    service_rejected: false
- name: tree_nut_allergy_salad
  inputs:
    user_text: I'm allergic to tree nuts but want a healthy salad with quinoa
  metadata:
    focus: allergen_with_ingredients
    complexity: medium
  expected_output:
    search_allergens_calls:
    - allergy_name: tree nut
    search_recipes_calls:
    - query: salad quinoa
      ingredients:
      - quinoa
      ingredients_to_avoid:
      - almonds
      - cashews
      - walnuts
      - hazelnuts
      - pecans
      - pistachios
    output:
      decision: recommend
    num_tool_calls: 2
    search_allergens_called_first: true
    service_rejected: false
- name: carnivore_high_end_calories
  inputs:
    user_text: I follow a carnivore diet, want something fancy, and need at least
      700 calories
  metadata:
    focus: diet_calories_cost
    complexity: medium
  expected_output:
    search_allergens_calls: []
    search_recipes_calls:
    - query: carnivore fancy meat
      diet: carnivore
      calories_min: 700
      cost_min: 15.0
    output:
      decision: recommend
    num_tool_calls: 1
    search_allergens_called_first: false
    service_rejected: false
- name: shellfish_allergy_pescatarian
  inputs:
    user_text: I'm pescatarian but allergic to shellfish, what fish dishes do you
      recommend?
  metadata:
    focus: diet_with_allergen
    complexity: medium
  expected_output:
    search_allergens_calls:
    - allergy_name: shellfish
    search_recipes_calls:
    - query: fish pescatarian
      diet: pescatarian
      ingredients_to_avoid:
      - shrimp
      - crab
      - lobster
    output:
      decision: recommend
    num_tool_calls: 2
    search_allergens_called_first: true
    service_rejected: false
- name: multiple_allergies_complex
  inputs:
    user_text: I'm allergic to dairy and eggs, want vegetarian Thai food that's easy
      to make
  metadata:
    focus: multiple_allergens
    complexity: complex
  expected_output:
    search_allergens_calls:
    - allergy_name: dairy
    - allergy_name: egg
    search_recipes_calls:
    - query: vegetarian thai
      diet: vegetarian
      cuisine: thai
      difficulty: easy
      ingredients_to_avoid:
      - milk
      - butter
      - cream
      - yogurt
      - cheddar
      - mozzarella
      - parmesan
      - feta
      - halloumi
      - ghee
      - egg
      - egg yolk
      - mayonnaise
    output:
      decision: recommend
    num_tool_calls: 3
    search_allergens_called_first: true
    service_rejected: false
- name: impossible_constraints_reject
  inputs:
    user_text: I want a vegan dish with beef and chicken that costs under $1
  metadata:
    focus: rejection_logic
    complexity: simple
  expected_output:
    search_allergens_calls: []
    search_recipes_calls: []
    output:
      decision: reject
      reason: Contradictory requirements
    num_tool_calls: 0
    search_allergens_called_first: false
    service_rejected: true
- name: soy_sesame_allergy_asian
  inputs:
    user_text: I love Asian food but I'm allergic to soy and sesame. What can I eat?
  metadata:
    focus: cuisine_with_allergens
    complexity: complex
  expected_output:
    search_allergens_calls:
    - allergy_name: soy
    - allergy_name: sesame
    search_recipes_calls:
    - query: asian
      cuisine: chinese
      ingredients_to_avoid:
      - soybeans
      - tofu
      - tempeh
      - soy sauce
      - edamame
      - sesame seeds
      - tahini
    output:
      decision: recommend
    num_tool_calls: 3
    search_allergens_called_first: true
    service_rejected: false
- name: quick_medium_difficulty
  inputs:
    user_text: I have 25 minutes and want something challenging but not too hard to
      cook
  metadata:
    focus: time_difficulty
    complexity: simple
  expected_output:
    search_allergens_calls: []
    search_recipes_calls:
    - query: quick challenging
      prep_time_max: 25
      difficulty: medium
    output:
      decision: recommend
    num_tool_calls: 1
    search_allergens_called_first: false
    service_rejected: false
- name: comprehensive_all_constraints
  inputs:
    user_text: I'm allergic to peanuts, want French vegetarian food under $12, max
      45 minutes, medium difficulty, between 500-750 calories
  metadata:
    focus: comprehensive
    complexity: complex
  expected_output:
    search_allergens_calls:
    - allergy_name: peanut
    search_recipes_calls:
    - query: french vegetarian
      diet: vegetarian
      cuisine: french
      cost_max: 12.0
      prep_time_max: 45
      difficulty: medium
      calories_min: 500
      calories_max: 750
      ingredients_to_avoid:
      - peanuts
      - peanut butter
      - peanut oil
    output:
      decision: recommend
    num_tool_calls: 2
    search_allergens_called_first: true
    service_rejected: false
evaluators:
- IsInstance: ChefResponse
- LLMJudge:
    rubric: Response should appropriately handle food allergies and dietary restrictions
      for safety
    model: anthropic:claude-3-7-sonnet-latest
    include_input: true
- LLMJudge:
    rubric: Tool usage should be logical - allergen searches should precede recipe
      searches when allergies are mentioned
    model: anthropic:claude-3-7-sonnet-latest
    include_input: true
